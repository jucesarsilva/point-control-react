(window["webpackJsonppoint-control-react"]=window["webpackJsonppoint-control-react"]||[]).push([[0],{115:function(e,t,a){},120:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),i=a.n(o),s=(a(97),a(11)),c=a(12),l=a(15),p=a(13),d=a(14),u=a(91),h=a(8),m=a(88),b="token",f=function(){return sessionStorage.getItem(b)};var g=a(5),y=a(44),v=a.n(y),O=function(e){var t=e.children,a=e.display,n=void 0===a?"flex":a,o=e.flexDirection,i=void 0===o?"column":o,s=e.alignItems,c=void 0===s?"center":s,l=e.justifyContent,p=void 0===l?"start":l,d=e.padding,u=void 0===d?"20px":d,h=e.margin,m=void 0===h?"auto":h,b=e.backgroundColor,f=void 0===b?"white":b,g=e.minHeight,y=void 0===g?"250px":g,v=e.maxWidth,O=void 0===v?"600px":v,j=e.minWidth,x=void 0===j?"300px":j,w=e.borderRadius,k=void 0===w?"10px":w,D=e.boxShadow,C=void 0===D?"0px 0px 8px 3px rgba(0,0,0,0.25)":D;return r.a.createElement("div",{style:{display:n,flexDirection:i,alignItems:c,justifyContent:p,padding:u,margin:m,backgroundColor:f,minHeight:y,maxWidth:O,minWidth:x,borderRadius:k,boxShadow:C}},t)},j=function(e){var t=e.children,a=e.color,n=void 0===a?"blueviolet":a,o=e.fontSize,i=void 0===o?"24px":o,s=e.fontFamily,c=void 0===s?"Sans-serif":s,l=e.fontWeight,p=void 0===l?"600":l,d=e.margin,u=void 0===d?"8px 0":d;return r.a.createElement("div",{style:{color:n,fontSize:i,fontFamily:c,fontWeight:p,margin:u}},t)},x=function(e){var t=e.children,a=e.onSubmit;return r.a.createElement("form",{onSubmit:a},t)},w=a(25),k=function(e){var t=e.error,a=e.message;return t?r.a.createElement("span",{style:{color:"red",fontSize:"12px"}},a):null};function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var E=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onFocus=function(){var e=C({},a.state.props);e.borderBottom="1px solid blueviolet",a.setState({props:e})},a.onBlur=function(){var e=C({},a.state.props);e.borderBottom="1px solid gray",a.setState({props:e})},a.displayClear=function(){return r.a.createElement("div",{onClick:a.onClick,style:{position:"absolute",bottom:"20px",right:"20px",fontWeight:"bold",color:"red",cursor:"pointer"}},"x")};var n={type:"text",name:"input-".concat(Math.random().toFixed(4)),value:"",placeholder:"placeholder",backgroundColor:"#d1d1d1",padding:"10px 8px",outlineWidth:0,border:"none",borderBottom:"1px solid gray",clear:null,index:null};return a.state={props:C({},n,{},e)},a.containerStyle={display:"flex",position:"relative",flexDirection:"column",marginBottom:"20px"},a.errorStyle={color:"red",fontSize:"12px"},a.onChange=a.onChange.bind(Object(g.a)(a)),a.onFocus=a.onFocus.bind(Object(g.a)(a)),a.onClick=a.onClick.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){var t=C({},this.state.props);t.value=e.target.value,t.onChange(t.value),this.setState({props:t})}},{key:"onClick",value:function(){this.props.clear&&this.props.clear(this.props.index)}},{key:"render",value:function(){return r.a.createElement("label",{style:this.containerStyle},r.a.createElement("input",{type:this.state.props.type,name:this.state.props.name,value:this.state.props.value,placeholder:this.state.props.placeholder,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,style:this.state.props,autoComplete:"off"}),this.props.clear?this.displayClear():"",r.a.createElement(k,{error:this.props.error,message:this.props.message}))}}]),t}(n.Component);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var M=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onMouseEnter=function(){var e=P({},a.state.props);e.backgroundColor="#973deb",a.setState({props:e})},a.onMouseLeave=function(){var e=P({},a.state.props);e.backgroundColor="blueviolet",a.setState({props:e})};return a.state={props:P({},{label:"Bot\xe3o",type:"submit",color:"white",backgroundColor:"blueviolet",padding:"8px",margin:"0",fontSize:"16px",cursor:"pointer",outlineWidth:0,border:"none",float:"unset",borderRadius:"unset"},{},e)},a.onMouseEnter=a.onMouseEnter.bind(Object(g.a)(a)),a.onMouseLeave=a.onMouseLeave.bind(Object(g.a)(a)),a.onClick=a.onClick.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){return r.a.createElement("button",{type:this.state.props.type,style:this.state.props,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick},this.state.props.label)}}]),t}(n.Component),Y="user";var R={position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},B=a(16),F=(a(54),a(115),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={login:"",password:""},a.error={login:!1,password:!1},a.message={login:"O campo login \xe9 de preenchimento obrigat\xf3rio.",password:"O campo senha \xe9 de preenchimento obrigat\xf3rio."},a.handleChangeLogin=a.handleChangeLogin.bind(Object(g.a)(a)),a.handleChangePassaword=a.handleChangePassaword.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChangeLogin",value:function(e){e&&e.length?this.error.login=!1:this.error.login=!0,this.setState({login:e})}},{key:"handleChangePassaword",value:function(e){e&&e.length?this.error.password=!1:this.error.password=!0,this.setState({password:e})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.error.login||this.error.password||v.a.post("http://localhost.com.br:8081/api/auth/login",{login:this.state.login,password:this.state.password}).then(function(e){var t,a;t={codUser:e.data.codUser,name:e.data.name,email:e.data.email,roles:e.data.roles},sessionStorage.setItem(Y,JSON.stringify(t)),a="".concat(e.data.tokenType," ").concat(e.data.accessToken),sessionStorage.setItem(b,a),window.location.href="/"}).catch(function(){B.b.error("Login/Senha inv\xe1lido(s).",R)})}},{key:"render",value:function(){return r.a.createElement("section",{className:"login"},r.a.createElement(O,null,r.a.createElement(j,null,"Controle de Ponto"),r.a.createElement(x,{onSubmit:this.handleSubmit},r.a.createElement(E,{name:"login",type:"text",placeholder:"Login",value:this.state.login,onChange:this.handleChangeLogin,error:this.error.login,message:this.message.login}),r.a.createElement(E,{name:"password",type:"password",placeholder:"Senha",value:this.state.password,onChange:this.handleChangePassaword,error:this.error.password,message:this.message.password}),r.a.createElement(M,{label:"Acessar"}))),r.a.createElement(B.a,null))}}]),t}(n.Component)),I=a(90),W=a(30),L=a.n(W),N=v.a.create({baseURL:"http://localhost.com.br:8081/api",headers:{"Content-Type":"application/json",Authorization:"".concat(f())}}),z=function(e){var t=e.children,a=e.padding,n=void 0===a?"20px 10px":a,o=e.color,i=void 0===o?"white":o,s=e.backgroundColor;return r.a.createElement("div",{style:{padding:n,color:i,backgroundColor:s}},t)};function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a.onClick=a.onClick.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){sessionStorage.removeItem(b),sessionStorage.removeItem(Y),window.location.href=""}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{padding:"20px",backgroundColor:"#655BA2"},"Controle de ponto",r.a.createElement(M,{float:"right",onClick:this.onClick,label:"Sair",margin:"0",padding:"5px 15px",borderRadius:"0"})),r.a.createElement("section",{style:{height:"calc(100vh - 60px - 59px)",overflow:"auto"}},this.props.children),r.a.createElement(z,{padding:"20px",backgroundColor:"#333333"},"Controle de ponto"))}}]),t}(n.Component),U=function(e){var t=e.children,a=e.padding,n=void 0===a?"0":a;return r.a.createElement("ul",{style:{padding:n,margin:0}},t)},J=function(e){var t=e.point;return r.a.createElement("div",{style:{margin:"0 10px",padding:"5px 10px",backgroundColor:"blueviolet",color:"white",fontWeight:"500"}},t.time)};function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"displayTimes",value:function(){return this.state.value.points?this.state.value.points.map(function(e,t){return r.a.createElement(J,{point:e,key:t})}):""}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.value.points?this.props.history.push("/times/edit/".concat(this.state.value.codDay)):this.props.history.push("/times/new/".concat(encodeURI(this.state.value.date)))}},{key:"render",value:function(){return r.a.createElement("li",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",padding:"20px",listStyleType:"none",border:"1px solid gray",borderBottom:this.state.last?"1px solid gray":"none"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"}},this.state.value.date,": ",this.displayTimes()),r.a.createElement(x,{onSubmit:this.handleSubmit},r.a.createElement(M,{label:this.state.value.points?"Editar":"Inserir",margin:"0 10px",padding:"5px 15px",borderRadius:"0"})))}}]),t}(n.Component),$=function(e,t){return L()(e).format(t)},q=function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];return"".concat(n,"-").concat(("0"+a).slice(-2),"-").concat(("0"+t).slice(-2))},G=a(43),K=a.n(G),Q=a(89),X=a(188),Z=a(41);a(119),a(120);Object(G.registerLocale)("pt-BR",Q.a);var _=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleChangeStartDate=function(e){a.setState({startDate:e})},a.handleChangeEndDate=function(e){a.setState({endDate:e})},a.state={days:[],tableDays:[],startDate:L()().startOf("day").subtract(31,"days").toDate(),endDate:new Date},a.onFilter=a.onFilter.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.onFilter()}},{key:"onFilter",value:function(){var e=this,t=encodeURI(L()(this.state.startDate).format("YYYY-MM-DD")),a=encodeURI(L()(this.state.endDate).format("YYYY-MM-DD"));N.get("days/".concat(t,"/").concat(a)).then(function(t){e.setState({days:t.data});var a=e.getDatesByFilter(e.state.endDate,e.state.startDate).map(function(e){return L()(e).format("DD-MM-YYYY")}),n=(a=a.reverse()).map(function(t,a){var n=e.state.days.find(function(e){return L()(e.date).format("DD-MM-YYYY")===t});return n&&(n.date=$(n.date,"DD-MM-YYYY")),n||{date:t}});e.setState({tableDays:n})}).catch(function(){B.b.error("N\xe3o foi poss\xedvel atualizar as marca\xe7\xf5es de ponto.",R)})}},{key:"getDatesByFilter",value:function(e,t){var a=Object(X.a)(e,t);return Object(I.a)(Array(a+1).keys()).map(function(e){return Object(Z.default)(t,e)})}},{key:"displayDays",value:function(){var e=this;return this.state.tableDays.map(function(t,a){return r.a.createElement(V,{key:a,value:t,history:e.props.history,last:a===e.state.tableDays.length-1})})}},{key:"render",value:function(){return r.a.createElement(T,null,r.a.createElement("div",{className:"filters-content"},r.a.createElement(K.a,{className:"datepicker",placeholderText:"Dt. in\xedcio",locale:"pt-BR",dateFormat:"dd/MM/yyyy",selected:this.state.startDate,onChange:this.handleChangeStartDate}),r.a.createElement(K.a,{className:"datepicker",placeholderText:"Dt. fim",locale:"pt-BR",dateFormat:"dd/MM/yyyy",selected:this.state.endDate,onChange:this.handleChangeEndDate}),r.a.createElement(M,{onClick:this.onFilter,label:"Filtrar",margin:"0",padding:"5px 15px",borderRadius:"0"})),r.a.createElement(U,{padding:"20px"},this.displayDays()),r.a.createElement(B.a,null))}}]),t}(n.Component);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).getDays=function(){N.get("day/".concat(a.props.match.params.id)).then(function(e){a.setState({day:e.data})}).catch(function(){B.b.error("N\xe3o foi poss\xedvel carregar as marca\xe7\xf5es de ponto.",R)})},a.state=te({},e,{editing:!1,removing:!1}),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.handleAdd=a.handleAdd.bind(Object(g.a)(a)),a.onClick=a.onClick.bind(Object(g.a)(a)),a.onRemove=a.onRemove.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.setState({editing:!0}),this.getDays()),this.props.match.params.date&&(this.setState({editing:!1}),this.setState({day:{codUser:JSON.parse(sessionStorage.getItem(Y)).codUser,date:q(this.props.match.params.date),points:[]}}))}},{key:"showDate",value:function(){return this.state.day?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",padding:"10px",marginBottom:"20px",backgroundColor:"#949494",color:"white"}},"Dia: ",$(this.state.day.date,"DD-MM-YYYY"),r.a.createElement(x,{onSubmit:this.handleAdd},r.a.createElement(M,{label:"+",margin:"0 10px",padding:"5px 10px",borderRadius:"50%"}))):""}},{key:"updateModel",value:function(e,t){e&&e.length?t.error=!1:(t.error=!0,t.message="Marca\xe7\xe3o inv\xe1lida."),t.time=e}},{key:"displayInputs",value:function(){var e=this;return this.state.day?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"baseline"}},this.state.day.points.map(function(t,a){return r.a.createElement(E,{type:"text",index:a,clear:e.onRemove,maxWidth:"80px",marginRight:"15px",name:"time ".concat(a+1),placeholder:"marca\xe7\xe3o ".concat(a+1),key:a,value:t.time,onChange:function(a){return e.updateModel(a,t)},error:t.error,message:t.message})}),0===this.state.day.points.length?"":r.a.createElement(x,{onSubmit:this.handleSubmit},r.a.createElement(M,{label:"Salvar",margin:"0 10px",padding:"5px 15px",borderRadius:"0"}))):""}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.persist()}},{key:"persist",value:function(){var e=this;this.state.editing?N.post("day/update",this.state.day).then(function(e){B.b.success("Marca\xe7\xf5es de pontos atualizadas com sucesso.",R)}).catch(function(){B.b.error("N\xe3o foi poss\xedvel atualizar as marca\xe7\xf5es de ponto.",R)}):N.post("day/save",this.state.day).then(function(t){e.props.history.push("/times/edit/".concat(t.data.codDay)),B.b.success("Marca\xe7\xf5es de pontos salvas com sucesso.",R)}).catch(function(){B.b.error("N\xe3o foi poss\xedvel salvar as marca\xe7\xf5es de ponto.",R)})}},{key:"handleAdd",value:function(e){e.preventDefault();var t=te({},this.state.day);this.state.editing?(t.points.push({codDay:this.props.match.params.id,time:"00:00:00"}),this.setState({day:t})):(t.points.push({time:"00:00:00"}),this.setState({day:t}))}},{key:"onClick",value:function(){this.props.history.push("")}},{key:"onRemove",value:function(e){var t=this;if(!this.state.removing){var a=te({},this.state.day),n=a.points[e];n.hasOwnProperty("codPoint")?(this.setState({removing:!0}),N.post("point/delete",n).then(function(){t.setState({removing:!1}),t.getDays(),B.b.success("Marca\xe7\xe3o de ponto removida com sucesso.",R)}).catch(function(){t.setState({removing:!1}),B.b.error("N\xe3o foi poss\xedvel remover a marca\xe7\xe3o de ponto.",R)})):(a.points.splice(e,1),this.setState({day:a}))}}},{key:"render",value:function(){return r.a.createElement(T,null,r.a.createElement("section",{style:{padding:"20px"}},r.a.createElement(M,{onClick:this.onClick,label:"Voltar",margin:"0 0 20px 0",padding:"5px 15px",borderRadius:"0"}),this.showDate(),this.displayInputs()),r.a.createElement(B.a,null))}}]),t}(n.Component),ne=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return r.a.createElement(h.a,Object.assign({},a,{render:function(e){return f()?r.a.createElement(t,e):r.a.createElement(F,null)}}))},re=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(h.c,null,r.a.createElement(ne,{exact:!0,path:"/",component:_}),r.a.createElement(ne,{path:"/times/edit/:id?",component:ae}),r.a.createElement(ne,{path:"/times/new/:date",component:ae})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,a){e.exports=a(180)},97:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.0058b1f3.chunk.js.map